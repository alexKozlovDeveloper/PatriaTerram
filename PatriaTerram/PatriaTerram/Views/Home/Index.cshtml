@model PatriaTerram.Core.Models.Palette

@{
    ViewBag.Title = "Patria Terram";
}

<div class="map-container">
    <table>
        @for (int i = 0; i < Model.Width; i++)
        {
            <tr>
                @for (int j = 0; j < Model.Height; j++)
                {
                    <td>
                        <div class="map-cell">
                            @for (int k = 0; k < Model[i, j].Colors.Length; k++)
                            {
                                <div class="map-cell-item" style='background-color: rgb(@Model[i, j].Colors[k], @Model[i, j].Colors[k], @Model[i, j].Colors[k]);'></div>
                            }
                        </div>
                    </td>
                }
            </tr>
        }
    </table>
</div>

<div>
    layers: @Model.Depth

    @for (int i = 0; i < Model.Depth; i++)
    {
        <div class="layer-button" onclick="selectLeayer(@i)">Layer @i</div>
    }

    <div onclick="hideAll()">
        Hide all
    </div>

</div>

<script>

    function selectLeayer(layerId) {
        //debugger;

        var cells = $(".map-cell");

        for (var i = 0; i < cells.length; i++) {
            var items = $(cells[i]).find(".map-cell-item")

            for (var j = 0; j < items.length; j++) {

                if (j == layerId) {
                    $(items[j]).removeClass("hidden-cell-item")
                }
                else {
                    $(items[j]).addClass("hidden-cell-item")
                }

                var color = items[j].innerHTML;

                $(items[j]).css('background-color', 'rgb(' + color + ', ' + color + ', ' + color+ ')');
            }            
        }
    }

    function hideAll(i) {
        //debugger;

        $(".map-cell-item")
            .addClass("hidden-cell-item")
    }

</script>





